if (self.CavalryLogger) { CavalryLogger.start_js(["+YBUN"]); }

__d("useCometMediaViewerComposerMentionsBootstrapDataSourceQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"existing_ids"},b={defaultValue:null,kind:"LocalArgument",name:"options"},c={defaultValue:null,kind:"LocalArgument",name:"scale"},d={defaultValue:null,kind:"LocalArgument",name:"types"},e=[{kind:"Variable",name:"existing_ids",variableName:"existing_ids"},{kind:"Literal",name:"include_viewer",value:!0},{kind:"Variable",name:"options",variableName:"options"},{kind:"Literal",name:"typeahead_context",value:"comet_media_viewer_mentions_limited"},{kind:"Variable",name:"types",variableName:"types"}],f={alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i={alias:"photo",args:[{kind:"Literal",name:"height",value:40},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:40}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},j=[g,h,i];h=[h,i];return{fragment:{argumentDefinitions:[a,b,c,d],kind:"Fragment",metadata:null,name:"useCometMediaViewerComposerMentionsBootstrapDataSourceQuery",selections:[{alias:null,args:e,concreteType:"CometComposerTypeaheadResultEntry",kind:"LinkedField",name:"comet_composer_typeahead_bootload",plural:!0,selections:[f,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:j,type:"User",abstractKey:null},{kind:"InlineFragment",selections:j,type:"Group",abstractKey:null},{kind:"InlineFragment",selections:j,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:j,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:j,type:"ContextualProfile",abstractKey:"__isContextualProfile"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,d,b,a],kind:"Operation",name:"useCometMediaViewerComposerMentionsBootstrapDataSourceQuery",selections:[{alias:null,args:e,concreteType:"CometComposerTypeaheadResultEntry",kind:"LinkedField",name:"comet_composer_typeahead_bootload",plural:!0,selections:[f,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},g,{kind:"InlineFragment",selections:h,type:"User",abstractKey:null},{kind:"InlineFragment",selections:h,type:"Group",abstractKey:null},{kind:"InlineFragment",selections:h,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:h,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:h,type:"ContextualProfile",abstractKey:"__isContextualProfile"}],storageKey:null}],storageKey:null}]},params:{id:"4295094367182811",metadata:{},name:"useCometMediaViewerComposerMentionsBootstrapDataSourceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useCometMediaViewerComposerMentionsNetworkDataSourceQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"count"},b={defaultValue:null,kind:"LocalArgument",name:"existing_ids"},c={defaultValue:null,kind:"LocalArgument",name:"photo_id"},d={defaultValue:null,kind:"LocalArgument",name:"scale"},e={defaultValue:null,kind:"LocalArgument",name:"search"},f={defaultValue:null,kind:"LocalArgument",name:"types"},g=[{kind:"Variable",name:"count",variableName:"count"},{kind:"Literal",name:"exclude_memorialized_users",value:!0},{kind:"Variable",name:"existing_ids",variableName:"existing_ids"},{kind:"Literal",name:"include_viewer",value:!0},{kind:"Variable",name:"photo_id",variableName:"photo_id"},{kind:"Variable",name:"query",variableName:"search"},{kind:"Literal",name:"typeahead_context",value:"comet_media_viewer_mentions"},{kind:"Variable",name:"types",variableName:"types"}],h={alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},k={alias:"photo",args:[{kind:"Literal",name:"height",value:40},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:40}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},l=[i,j,k];j=[j,k];return{fragment:{argumentDefinitions:[a,b,c,d,e,f],kind:"Fragment",metadata:null,name:"useCometMediaViewerComposerMentionsNetworkDataSourceQuery",selections:[{alias:null,args:g,concreteType:"CometComposerTypeaheadResultEntry",kind:"LinkedField",name:"comet_composer_typeahead_search",plural:!0,selections:[h,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:l,type:"User",abstractKey:null},{kind:"InlineFragment",selections:l,type:"Group",abstractKey:null},{kind:"InlineFragment",selections:l,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:l,type:"Page",abstractKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,d,a,f,c,b],kind:"Operation",name:"useCometMediaViewerComposerMentionsNetworkDataSourceQuery",selections:[{alias:null,args:g,concreteType:"CometComposerTypeaheadResultEntry",kind:"LinkedField",name:"comet_composer_typeahead_search",plural:!0,selections:[h,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i,{kind:"InlineFragment",selections:j,type:"User",abstractKey:null},{kind:"InlineFragment",selections:j,type:"Group",abstractKey:null},{kind:"InlineFragment",selections:j,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:j,type:"Page",abstractKey:null}],storageKey:null}],storageKey:null}]},params:{id:"2164840990282616",metadata:{},name:"useCometMediaViewerComposerMentionsNetworkDataSourceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useCometMediaViewerComposerMentionsNullstateDataSourceQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"existing_ids"},b={defaultValue:null,kind:"LocalArgument",name:"options"},c={defaultValue:null,kind:"LocalArgument",name:"scale"},d={defaultValue:null,kind:"LocalArgument",name:"types"},e=[{kind:"Variable",name:"existing_ids",variableName:"existing_ids"},{kind:"Literal",name:"include_viewer",value:!0},{kind:"Variable",name:"options",variableName:"options"},{kind:"Literal",name:"typeahead_context",value:"comet_media_viewer_mentions_limited"},{kind:"Variable",name:"types",variableName:"types"}],f={alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i={alias:"photo",args:[{kind:"Literal",name:"height",value:40},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:40}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},j=[g,h,i];h=[h,i];return{fragment:{argumentDefinitions:[a,b,c,d],kind:"Fragment",metadata:null,name:"useCometMediaViewerComposerMentionsNullstateDataSourceQuery",selections:[{alias:null,args:e,concreteType:"CometComposerTypeaheadResultEntry",kind:"LinkedField",name:"comet_composer_typeahead_bootload",plural:!0,selections:[f,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:j,type:"User",abstractKey:null},{kind:"InlineFragment",selections:j,type:"Group",abstractKey:null},{kind:"InlineFragment",selections:j,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:j,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:j,type:"ContextualProfile",abstractKey:"__isContextualProfile"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,d,b,a],kind:"Operation",name:"useCometMediaViewerComposerMentionsNullstateDataSourceQuery",selections:[{alias:null,args:e,concreteType:"CometComposerTypeaheadResultEntry",kind:"LinkedField",name:"comet_composer_typeahead_bootload",plural:!0,selections:[f,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},g,{kind:"InlineFragment",selections:h,type:"User",abstractKey:null},{kind:"InlineFragment",selections:h,type:"Group",abstractKey:null},{kind:"InlineFragment",selections:h,type:"Event",abstractKey:null},{kind:"InlineFragment",selections:h,type:"Page",abstractKey:null},{kind:"InlineFragment",selections:h,type:"ContextualProfile",abstractKey:"__isContextualProfile"}],storageKey:null}],storageKey:null}]},params:{id:"4283771601648648",metadata:{},name:"useCometMediaViewerComposerMentionsNullstateDataSourceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useCometMediaViewerTaggingMentionsStrategyResolver_photo.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCometMediaViewerTaggingMentionsStrategyResolver_photo",selections:[{alias:null,args:null,concreteType:"PhotoTagsConnection",kind:"LinkedField",name:"tags",plural:!1,selections:[{alias:null,args:null,concreteType:"PhotoTagsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null};e.exports=a}),null);
__d("adjustFaceboxPosition",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){var b=a.originalPos,c=a.imageDimension;a=a.boxSize;return b<0?0:b+a>c?c-a:b}}),null);
__d("PhotoEditorViewStateContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=a.createContext({index:0});e.exports=c}),null);
__d("useCometMediaViewerComposerMentionsBootstrapDataSource",["CometRelay","FeedComposerCometMentionsTypeaheadEntry","WebPixelRatio","useCometTypeaheadCompositeBootstrapDataSource","useCometMediaViewerComposerMentionsBootstrapDataSourceQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g!==void 0?g:g=b("useCometMediaViewerComposerMentionsBootstrapDataSourceQuery.graphql");function a(a){var c=a.existingIDs,d=a.firstDegreeFinderOptions,e=a.limit;a=a.mentionTypes;return b("useCometTypeaheadCompositeBootstrapDataSource")({gqlQuery:h,limit:e,normalize:i,queryVariables:{existing_ids:c.map(function(a){return parseInt(a,10)}),options:d,scale:b("WebPixelRatio").get(),types:a}})}function i(a){a=a==null?void 0:a.comet_composer_typeahead_bootload;return a==null?[]:a.map(function(a){if(a==null)return;return b("FeedComposerCometMentionsTypeaheadEntry").fromGraphql({data:a,type:"MENTION_SEARCH_RESULT"})}).filter(Boolean)}}),null);
__d("useCometMediaViewerComposerMentionsNetworkDataSource",["CometRelay","FeedComposerCometMentionsTypeaheadEntry","WebPixelRatio","useCometTypeaheadGraphQLDataSource","useCometMediaViewerComposerMentionsNetworkDataSourceQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g!==void 0?g:g=b("useCometMediaViewerComposerMentionsNetworkDataSourceQuery.graphql");function a(a){var c=a.existingIDs,d=a.limit,e=a.mentionTypes,f=a.photoID;return b("useCometTypeaheadGraphQLDataSource")({gqlQuery:h,limit:d,normalize:i,queryVariablesBuilderFunction:function(a){a=a.query;return{count:d,existing_ids:c.map(function(a){return parseInt(a,10)}),photo_id:f,scale:b("WebPixelRatio").get(),search:a,types:e}}})}function i(a){a=a==null?void 0:a.comet_composer_typeahead_search;return a==null?[]:a.map(function(a){if(a==null)return;var c=a.node,d=a.score;if(d==null||c==null)return null;d=c==null?void 0:c.name;var e=c==null?void 0:c.id;c=c==null?void 0:(c=c.photo)==null?void 0:c.uri;return d==null||e==null||c==null?null:b("FeedComposerCometMentionsTypeaheadEntry").fromGraphql({data:a,type:"MENTION_SEARCH_RESULT"})}).filter(Boolean)}}),null);
__d("useCometMediaViewerComposerMentionsNullstateDataSource",["CometRelay","FeedComposerCometMentionsTypeaheadEntry","WebPixelRatio","useCometTypeaheadGraphQLDataSource","useCometMediaViewerComposerMentionsNullstateDataSourceQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g!==void 0?g:g=b("useCometMediaViewerComposerMentionsNullstateDataSourceQuery.graphql");function a(a){var c=a.existingIDs,d=a.firstDegreeFinderOptions,e=a.limit,f=a.mentionTypes;return b("useCometTypeaheadGraphQLDataSource")({gqlQuery:h,limit:e,normalize:i,queryVariablesBuilderFunction:function(){return{existing_ids:c.map(function(a){return parseInt(a,10)}),options:d,scale:b("WebPixelRatio").get(),types:f}}})}function i(a){a=a==null?void 0:a.comet_composer_typeahead_bootload;return a==null?[]:a.map(function(a){return a==null?null:b("FeedComposerCometMentionsTypeaheadEntry").fromGraphql({data:a,type:"MENTION_SEARCH_RESULT"})}).filter(Boolean)}}),null);
__d("useCometMediaViewerComposerMentionsDataSource",["useCometMediaViewerComposerMentionsBootstrapDataSource","useCometMediaViewerComposerMentionsNetworkDataSource","useCometMediaViewerComposerMentionsNullstateDataSource","useCometTypeaheadCompositeDataSource"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){var c=a.config,d=a.existingIDs,e=a.limit;a=a.photoID;return b("useCometTypeaheadCompositeDataSource")({bootstrapDataSource:b("useCometMediaViewerComposerMentionsBootstrapDataSource")({existingIDs:d,firstDegreeFinderOptions:c.bootstrap.firstDegreeFinderOptions,limit:Math.floor(e/2),mentionTypes:c.bootstrap.mentionTypes,photoID:a}),limit:e,networkDataSource:b("useCometMediaViewerComposerMentionsNetworkDataSource")({existingIDs:d,limit:e,mentionTypes:c.network.mentionTypes,photoID:a}),nullstateDataSource:b("useCometMediaViewerComposerMentionsNullstateDataSource")({existingIDs:d,firstDegreeFinderOptions:["FRIENDS_ONLY"],limit:e,mentionTypes:["USER"]})})}}),null);
__d("useCometMediaViewerTaggingMentionsStrategyResolver",["CometRelay","React","createCometWithTagStrategy","useCometMediaViewerComposerMentionsDataSource","useCometMentionsStrategyResolver","useCometMediaViewerTaggingMentionsStrategyResolver_photo.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a,c){c=b("CometRelay").useFragment(g!==void 0?g:g=b("useCometMediaViewerTaggingMentionsStrategyResolver_photo.graphql"),c);c=c!=null?c==null?void 0:(c=c.tags)==null?void 0:c.edges.map(function(a){return a==null?void 0:(a=a.node)==null?void 0:a.id}).filter(Boolean):[];var d=b("useCometMediaViewerComposerMentionsDataSource")({config:{bootstrap:{firstDegreeFinderOptions:["FRIENDS_ONLY"],mentionTypes:["USER"]},network:{mentionTypes:["user","group","event","page"]}},existingIDs:(c=c)!=null?c:[],limit:5,photoID:a});c=h.useMemo(function(){return[{dataSource:d,searchStrategy:b("createCometWithTagStrategy")({minMatchLength:0})}]},[d]);return b("useCometMentionsStrategyResolver")(c)}}),null);
__d("CometMediaViewerMentionsTypeaheadContextualLayer.react",["CometMediaViewerMentionsTypeaheadEmptyState.react","CometSearchTypeaheadBaseLayoutMentionsStrategy.react","React","cometSearchTypeaheadBaseKeyboardNavigationUtils","useCometSearchTypeaheadBaseDataSourceFetch"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a,c){var d=a.dataSource,e=a.onHighlightEntry,f=a.onResultsLoaded,i=a.onSelectedEntry,j=a.query,k=a.showLoadingIndicator;k=k===void 0?!1:k;a=a.viewItemStrategyRenderer;var l=g.useState([]),m=l[0],n=l[1];l=g.useState(null);var o=l[0],p=l[1],q=g.useRef(null);l=b("useCometSearchTypeaheadBaseDataSourceFetch")({dataSource:d,onResolvePayload:g.useCallback(function(a){a=a.entries;return n(a)},[])});d=l[0].isLoading;var r=l[1];g.useEffect(function(){r({query:j})},[r,j]);g.useImperativeHandle(c,function(){return{getNode:function(){return q.current},hasSelection:function(){return h(m,o)},moveDown:function(){b("cometSearchTypeaheadBaseKeyboardNavigationUtils").moveDown(m,o!=null?o.getKey():null,p)},moveUp:function(){b("cometSearchTypeaheadBaseKeyboardNavigationUtils").moveUp(m,o!=null?o.getKey():null,p)},select:function(){i&&o!=null&&h(m,o)&&i(o,j)}}},[o,i,j,m]);l=g.useCallback(function(a){e&&e(a);p((a=a)!=null?a:null)},[e]);c=g.useCallback(function(a){h(m,a)&&(i&&i(a,j))},[m,i,j]);g.useEffect(function(){!h(m,o)&&m.length>0&&p(m[0])},[m,o]);g.useEffect(function(){f&&f()},[f,m]);if(m.length>0||k)return g.jsx("div",{ref:q,children:g.jsx(b("CometSearchTypeaheadBaseLayoutMentionsStrategy.react"),{entries:m,highlightedEntry:o,isLoading:k&&d,onHighlightEntry:l,onPressEntry:c,queryString:j,viewItemStrategyRenderer:a})});else if(m.length===0&&!d)return g.jsx("div",{children:g.jsx(b("CometMediaViewerMentionsTypeaheadEmptyState.react"),{})});return null}function h(a,b){if(b==null)return!1;var c=b.getKey();return a.find(function(a){return a.getKey()===c})!=null}c=g.forwardRef(a);e.exports=c}),null);
__d("CometMediaViewerMentionsTypeaheadListItem.react",["CometImageIcon.react","CometSearchMentionsBaseViewItem.react","React","TetraText.react","recoverableViolation","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);var d=c.getLabel(),e=c.getPhotoURI(),f=null;e==null?b("recoverableViolation")("No profile picture found for mentions entry","comet_composer"):f=g.jsx(b("CometImageIcon.react"),{size:20,src:e,style:"circle"});return g.jsx(b("CometSearchMentionsBaseViewItem.react"),babelHelpers["extends"]({},a,{entry:c,children:g.jsxs("div",{className:"jnigpg78 j83agx80 bp9cbjyn",children:[f,g.jsx("div",{className:"ni8dbmo4 ozuftl9m datstx6m j83agx80 bp9cbjyn",children:g.jsx(b("TetraText.react"),{numberOfLines:1,type:"body3",children:d})})]})}))}}),null);